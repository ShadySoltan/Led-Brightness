#include "tm4c123gh6pm.h"

void PORTF_INIT()
{
    // Turn on Clock
    SYSCTL_RCGCGPIO_R = 0x20;
    while ((SYSCTL_PRGPIO_R & 0x20) == 0);
}

void PORTF_LEDs_INIT(void) //Initialize lEDs as GPIO
{
    // Configure the Board LEDs
    PORTF_INIT();
    // Turn off Alternate Function
    GPIO_PORTF_AFSEL_R &= 0xF1;
    // Turn off Analog Mode
    GPIO_PORTF_AMSEL_R &= 0xF1;
    // Configure all three pins as output
    GPIO_PORTF_DIR_R |= 0x0E;
    // Choose GPIO mode for the three pins
    GPIO_PORTF_PCTL_R &= 0xFFFF000F;
    // Enable pins
    GPIO_PORTF_DEN_R |= 0x0E;
    // Turn off pins
    GPIO_PORTF_DATA_R &= 0xF1;
}

//Configure PWM module 1 channel 6 for the blue led pin PF2
void PWM1_CH6_PF2(void)
{
    //Enable PWm1 module clock
    SYSCTL_RCGCPWM_R |= (1<<1);

    //Enable Clock for PORTF
    SYSCTL_RCGCGPIO_R |= (1<<5);
    while((SYSCTL_PRGPIO_R & 0x20) == 0);

    //Use SystemClock for PWM 16MHz
    SYSCTL_RCC_R &= ~(1<<20);

    //Select Alternate function for PF2
    GPIO_PORTF_AFSEL_R |= (1<<2);
}

void main(void)
{
    while (1)
    {
        // Infinite loop; Blue LED should be on with PWM (100% duty cycle)
    }
}
